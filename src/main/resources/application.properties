# =================================================
# APPLICATION
# =================================================
spring.application.name=poki

# =================================================
# MYSQL / JPA CONFIG
# =================================================
spring.datasource.url=${DB_URL:jdbc:mysql://localhost:3306/poki?createDatabaseIfNotExist=true&autoReconnect=true&useSSL=false}
spring.datasource.username=${DB_USERNAME:root}
spring.datasource.password=${DB_PASSWORD:}

spring.jpa.database-platform=org.hibernate.dialect.MySQL8Dialect
spring.jpa.hibernate.ddl-auto=update

# Disable SQL logging to reduce RAM and network egress
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.format_sql=false
logging.level.org.hibernate.SQL=OFF
logging.level.org.hibernate.type.descriptor.sql=OFF

# Timezone for DB
spring.jpa.properties.hibernate.jdbc.time_zone=Asia/Ho_Chi_Minh

# =================================================
# HIKARI CONNECTION POOL (CRITICAL SETTINGS)
# =================================================
spring.datasource.hikari.maximum-pool-size=5
spring.datasource.hikari.minimum-idle=2
spring.datasource.hikari.idle-timeout=300000
spring.datasource.hikari.max-lifetime=900000
spring.datasource.hikari.connection-timeout=30000

# =================================================
# SERVER / SESSION
# =================================================
server.servlet.session.timeout=5m

# =================================================
# COMPRESSION (Reduces network egress 60-80%)
# =================================================
server.compression.enabled=true
server.compression.mime-types=application/json,text/html,text/plain
server.compression.min-response-size=1024

# =================================================
# JACKSON (Reduce JSON size)
# =================================================
spring.jackson.time-zone=Asia/Ho_Chi_Minh
spring.jackson.default-property-inclusion=non_null

# =================================================
# THYMELEAF (PRODUCTION)
# =================================================
spring.thymeleaf.prefix=classpath:/templates/
spring.thymeleaf.suffix=.html
spring.thymeleaf.mode=HTML
spring.thymeleaf.encoding=UTF-8
spring.thymeleaf.cache=true

# =================================================
# JWT CONFIG
# =================================================


# =================================================
# RATE LIMITING
# =================================================


# =================================================
# BLACKLIST
# =================================================


# =================================================
# LOGGING (PRODUCTION SAFE)
# =================================================
logging.level.root=INFO
logging.level.org.springframework.security=INFO
logging.level.com.remake.poki.security=INFO
logging.level.com.remake.poki.security.RateLimitFilter=INFO
logging.level.com.remake.poki.service.IpBlacklistService=INFO

# =================================================
# TASK / SCHEDULER (For background jobs)
# =================================================
spring.task.scheduling.pool.size=2

# =================================================
# DEVTOOLS (Safety check)
# =================================================
spring.devtools.restart.enabled=false